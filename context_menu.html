<style>
.hide {
 display: none;
}
#context_menu {
 cursor: default;
 position: fixed;
 box-sizing: border-box;
 width: 375px;
 background-color: #FAFAFA;
 border: 1px solid #DCDCDCEE;
 border-radius: 4px;
 box-shadow: 0 10px 15px #888;
}
.separator {
  margin: 4px 0;
  height: 1px;
  border: none;
  background-color: #E8E8E8;
}
.item {
 margin: 4px;
 border-radius: 4px;
 font-family: 'Segoe UI';
 color: #040404;
}
.icon {
 display: inline-block;
 margin-left: 10px;
 padding: 5px 0;
 font-family: 'Segoe Fluent Icons';
 vertical-align: -3px;
}
.text {
 display: inline-block;
 margin: 0 10px;
 padding: 5px 0;
 font-size: 0.9em;
}
.item.disabled {
  color: #AAA;
}
.item:not(.disabled):hover {
  background-color: #EFEFEF;
}
@keyframes fadein {
 from { opacity: 0 }
 to { opacity: 1 }
}
</style>

<div id="context_menu" class="hide"></div>

<script>
function createMenuOption(option) {
  if (option.type === "line") {
   return `<hr class="separator" />`;
  }
  if (option.type === "item") {
   return `
    <div class="item ${option.disabled ? "disabled" : ""}">
     <div class="icon">${option.icon}</div>
     <div class="text">${option.text}</div>
    </div>
   `;
  }
}

function main() {
 let context_menu = document.querySelector("#context_menu");

 const menuOptions = [
  { type: "item", icon: "", text: "Back" },
  { type: "item", icon: "", text: "Forward", disabled: true },
  { type: "item", icon: "", text: "Refresh" },
  { type: "line" },
  { type: "item", icon: "", text: "Save" },
  { type: "item", icon: "", text: "Print" },
 ];

 context_menu.innerHTML = "";
 menuOptions.forEach(option => {
  context_menu.innerHTML += createMenuOption(option);
 });



 window.onmousedown = e => {
  if ( e.path.find(a => a.id=="context_menu") === undefined )
   context_menu.classList.add("hide");
 };

 window.oncontextmenu = e => {
  e.preventDefault();
  if ( e.path.find(a => a.id=="context_menu") !== undefined )
   return;

  context_menu.classList.remove("hide");
  context_menu.style.animation = "fadein 0.2s";

  let top;
  if (innerHeight - e.y > context_menu.offsetHeight) {
   top = e.y;
  }
  else if (e.y > context_menu.offsetHeight) {
   top = e.y- context_menu.offsetHeight;
  }
  else {
   top = innerHeight - context_menu.offsetHeight;
  }

  let left = Math.min(innerWidth - context_menu.offsetWidth, e.x);

  context_menu.style.top = top + "px";
  context_menu.style.left = left + "px";
 };
}
main();
</script>
